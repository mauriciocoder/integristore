<div ng-controller="StoreController as ctrl">
  <header>
      <h2 class="text-center">Integritas Store</h2>
  </header>
  <div class="container-fluid">
    <div class="row">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Product Name</th>
            <th scope="col">Price</th>
          </tr>
        </thead>
        <tbody>
            <tr ng-repeat="product in ctrl.getCartItems() | orderBy:'-price'">
              <td>{{product.name}}</td>
              <td>{{product.price}}</td>
            </tr>
        </tbody>
      </table>
      <h6 class="text-center">Cart items: {{ctrl.getItemsQty()}} Total: {{ctrl.getCartPrice() | currency}}</h6>
    </div>
    <br/>
    <h4>Credit Card Payment</h4>
    <p>{{checkoutSuccess}}</p>
    <div>
      <form id="needs-validation" ng-submit="ctrl.checkout()">
        <div class="form-group row">
          <label for="inputName" class="col-sm-2 col-form-label">Name</label>
          <div class="col-sm-10">
            <input type="text" class="form-control" id="inputName" ng-model="name" placeholder="Name" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="inputCardNumber" class="col-sm-2 col-form-label">Card Number</label>
          <div class="col-sm-10">
            <input type="number" class="form-control" id="inputCardNumber" ng-model="cardNumber" placeholder="Card Number" required>
          </div>
        </div>
        <div class="form-group row">
          <label for="inputExpDate" class="col-sm-2 col-form-label">Exp Date</label>
          <div class="col-sm-2">
            <input type="number" maxlength="2" class="form-control" id="inputExpDateMonth"  ng-model="expDateMonth" placeholder="Month" required>
          </div>
          <div class="col-sm-2">
            <input type="number" maxlength="2" class="form-control" id="inputExpDateYear" ng-model="expDateYear" placeholder="Year" required>
          </div>
          <div class="col-sm-8"></div>
        </div>
        <div class="form-group row">
          <div class="col-sm-10">
            <button type="submit" class="btn btn-primary">Checkout</button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
<script>
(function() {
  // Only for form validation purpose
  'use strict';

  window.addEventListener('load', function() {
    var form = document.getElementById('needs-validation');
    form.addEventListener('submit', function(event) {
      if (form.checkValidity() === false) {
        event.preventDefault();
        event.stopPropagation();
      }
      form.classList.add('was-validated');
    }, false);
  }, false);
})();
</script>
